#### 一、使用 syslog 协议

* 优点：
  * 原来的环境更改变动较大
  * 不占用磁盘
  * 对于系统服务支持良好
  * 对于网络硬件支持良好
* 缺点：
  * 某些重点放在”写“本地文件日志的第三方程序不是完美支持
    > 例如
    >
    > nginx会使远程rsyslog服务器反向解析主机名的时候，会将全部大写字母转换为小写字母，导致无法统一，标准化
    >
    > phpfpm将所有级别默认为notice，或者可以改为其他级别，但是phpfpm只能使用一种级别，无法日志分级  
    > phpfpm慢执行日志也无法通过syslog协议发送
    >
    > mysql慢查询日志及sql语句记录日志都无法使用rsyslog协议
    >
    > redis无法将日志分级

#### 二、使用文本文件转发

* 优点：
  * 原来的环境更改变动微小
  * 使用简单
  * 调试及故障排查时可快速查看本机日志
* 缺点：

  * rsyslog客户端操作分级复杂
  * 源文本文件占用磁盘，除非定时清理

    > 例如
    >
    > 长期不整理源文本文件，它将会越来越大，直至撑满
    >
    > 文本文件清理后 rsyslog 无法继续读取

#### 三、使用 fifo 命名管道

* 优点：
  * 原来的环境更改变动微小
  * 源文件不会占用磁盘
  * 不会操作磁盘，没有IO操作
    > 除非内存太少了，操作swap就会操作磁盘IO
* 缺点：
  * 受内核默认管道大小限制为 1MB
  * 需要手动新建一个 fifo 文件
  * 内容存在内存中，占用少量内存
  * rsyslog客户端操作分级复杂

### 这里选择 syslog协议+命名管道



