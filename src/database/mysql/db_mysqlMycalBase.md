#### 分布式数据库

分布式数据库指其组件分布在网络各各节点上，每个节点之间通过网络通信和动作协调。

核心理念是让多台服务器协同工作，完成单台服务器无法处理的任务。

尤其适合 高并发、大数据 的任务。

特点：透明性、冗余性、扩展性、可靠性、高性能、逻辑整体性、物理分布性

#### 分表分库原则

分表分库虽然能解决大表对数据库系统的压力，但它并不是万能的，也有一些不利之处，因此首要问题是，分不分库，分哪些库，什么规则分，分多少分片。

* 原则一：能不分就不分，1000 万以内的表，不建议分片，通过合适的索引，读写分离等方式，可以很好的解决性能问题。
* 原则二：分片数量尽量少，分片尽量均匀分布在多个 DataHost 上，因为一个查询 SQL 跨分片越多，则总体性能越差，虽然要好于所有数据在一个分片的结果，只在必要的时候进行扩容，增加分片数量。
* 原则三：分片规则需要慎重选择，分片规则的选择，需要考虑数据的增长模式，数据的访问模式，分片关联性问题，以及分片扩容问题，最近的分片策略为范围分片，枚举分片，一致性 Hash 分片，这几种分片都有利于扩容
* 原则四：尽量不要在一个事务中的 SQL 跨越多个分片，分布式事务一直是个不好处理的问题
* 原则五：查询条件尽量优化，尽量避免 Select \* 的方式，大量数据结果集下，会消耗大量带宽和 CPU 资源，查询尽量避免返回大量结果集，并且尽量为频繁使用的查询语句建立索引。

这里特别强调一下分片规则的选择问题，如果某个表的数据有明显的时间特征，比如订单、交易记录等，则他们通常比较合适用时间范围分片，因为具有时效性的数据，我们往往关注其近期的数据，查询条件中往往带有时间字段进行过滤，比较好的方案是，当前活跃的数据，采用跨度比较短的时间段进行分片，而历史性的数据，则采用比较长的跨度存储。

总体上来说，分片的选择是取决于最频繁的查询 SQL 的条件，因为不带任何 Where 语句的查询 SQL，会便利所有的分片，性能相对最差，因此这种 SQL 越多，对系统的影响越大，所以我们要尽量避免这种 SQL 的产生。

#### 实现原理

正是分布式数据库的物理分布性，才使得分布式数据库的实现变得更加复杂。

因为数据划分后存储在不同节点上，为了保证可靠性，需要存储多个副本，所以产生了数据复制的问题。

优势：数据分片及复制管理、具有事务的可靠性存取、良好的性能、益于扩展

> ```
> 《 MySql管理之道：性能调优、高可用与监控... 》
> http://www.jianshu.com/p/32b2b2dc2628
> ```



